<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taller IA Nivel 2 - EnfermerIA</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para compilar JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Configuración Tailwind personalizada -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        medical: { 50: '#f0f9ff', 100: '#e0f2fe', 200: '#bae6fd', 300: '#7dd3fc', 600: '#0284c7', 800: '#075985' }
                    }
                }
            }
        }
    </script>
    
    <!-- Estilos adicionales -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        .animate-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(226, 232, 240, 0.8); }
        /* Scrollbar fina */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS (Lucide Simplificado) ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                Home: <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>,
                BookOpen: <><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></>,
                Wrench: <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>,
                Trophy: <path d="M8 21h8m-4-9v9m-4.8-9a4 4 0 0 1-2.4-7h14.4a4 4 0 0 1-2.4 7M6 5V2h12v3"></path>,
                MessageSquare: <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2-2h14a2 2 0 0 1 2-2z"></path>,
                FileText: <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>,
                ExternalLink: <><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></>,
                ChevronDown: <polyline points="6 9 12 15 18 9"></polyline>,
                ChevronUp: <polyline points="18 15 12 9 6 15"></polyline>,
                Copy: <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>,
                Laugh: <><circle cx="12" cy="12" r="10"></circle><path d="M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12z"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></>,
                Stethoscope: <path d="M4.8 2.3A.3.3 0 0 0 5 2h.1a5 5 0 0 1 4.2 2.3C10.6 6 12 6 12 6s2.5 0 4-3l.1-.3a.3.3 0 0 0-.2-.3h-.1a.3.3 0 0 0-.2.3L15.6 3a4 4 0 0 0-3.3 2H12a4 4 0 0 0-3.2-2L8.5 2.7a.3.3 0 0 0-.2-.3zM4 3v8a4 4 0 0 0 8 0V7"></path>,
                Search: <circle cx="11" cy="11" r="8"></circle>,
                Zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>,
                CheckCircle: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>,
                AlertCircle: <circle cx="12" cy="12" r="10"></circle>,
                Brain: <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>,
                X: <><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>,
                Eye: <><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></>,
                Clock: <circle cx="12" cy="12" r="10"></circle>,
                Target: <circle cx="12" cy="12" r="10"></circle>,
                Glasses: <><circle cx="6" cy="12" r="4"/><circle cx="18" cy="12" r="4"/><path d="M10 12h4"/></>,
                Play: <polygon points="5 3 19 12 5 21 5 3"></polygon>,
                Bandage: <path d="M10 2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"></path>,
                Thermometer: <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"></path>,
                Activity: <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>,
                Scissors: <><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></>,
                Mail: <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>,
                Linkedin: <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
            };

            const path = icons[name] || null;
            
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {path}
                    {name === 'Clock' && <><polyline points="12 6 12 12 16 14"></polyline></>}
                    {name === 'Target' && <><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></>}
                    {name === 'Mail' && <polyline points="22,6 12,13 2,6"></polyline>}
                    {name === 'Linkedin' && <><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></>}
                </svg>
            );
        };

        // --- UTILIDADES ---
        const copyToClipboard = (text) => {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
            } catch (err) {
                console.error('Error al copiar al portapapeles', err);
            }
            
            document.body.removeChild(textArea);
        };

        // --- TEXTO DOCUMENTOS ---
        const TEXTO_CI_AMIGDALAS = `
Osakidetza. CONSENTIMIENTO INFORMADO PARA AMIGDALECTOMÍA (BI/CI-ORL-02)

B. INFORMACIÓN:
La amigdalectomía es la intervención quirúrgica en la que se extirpan las amígdalas, situadas a ambos lados del paladar. La operación se suele efectuar bajo anestesia general, a través de la boca.

Tras la intervención, aparecen molestias dolorosas en el momento de tragar, que suelen ser intensas y prolongarse a lo largo de 10 o 15 días, irradiándose hacia los oídos. Puede notarse durante las primeras horas la saliva teñida de sangre o vómitos de sangre oscura. También pueden ser normales las heces oscuras. Durante los primeros días puede percibirse mal aliento. Al abrir la boca pueden verse zonas grisáceas o blanquecinas (es normal, cicatrización).

C. RIESGOS Y COMPLICACIONES:
- Puede quedar una pequeña cantidad de amígdalas.
- Hemorragia de cierta intensidad: si fuera muy intensa podría aparecer anemia o shock. Casi siempre obliga a una nueva intervención.
- Paso de sangre hacia las vías respiratorias (hemoaspiración), con riesgo de parada cardiorrespiratoria.
- Infección: no es frecuente, pero podría aparecer septicemia si el paciente está debilitado.
- Pérdida de alguna pieza dental accidentalmente, cambio del tono de voz, voz nasalizada.
- Tortícolis y tos persistente (pasajeras).

D. AVÍSENOS:
Es necesario que nos advierta de alergias, alteraciones de la coagulación, enfermedades cardiopulmonares, prótesis, marcapasos o medicaciones actuales (especialmente aspirina o ibuprofeno).

F. ALTERNATIVAS:
No se conocen procedimientos de contrastada eficacia.
        `;

        // --- DATOS ---
        const REPOSITORY_DOCS = [
            { id: 100, title: 'CI Amigdalectomía (ORL)', description: 'Consentimiento para ejercicio de simplificación.', type: 'DOC', category: 'Ejercicio', content: TEXTO_CI_AMIGDALAS, url: null },
            { 
                id: 1, 
                title: 'Convenio Osakidetza', 
                description: 'Marco regulador y derechos laborales (PDF completo).', 
                type: 'MULTI', 
                category: 'Laboral', 
                actions: [
                    { label: 'Abrir PDF', url: 'https://www.comgi.eus/Fichero.aspx?mod=gescontenidos&sec=arc&lng=EU&cod=1063&fil=20170407083245265ARCH_Fichero.pdf&nom=Acuerdo+Regulador+de+las+Condiciones+de+Trabajo+de+Osakidetza', icon: 'ExternalLink' },
                    { label: 'Actualización 2023', url: 'https://drive.google.com/file/d/1-yAtWI3wc6Rrt6JCrtaCAZ9vnrRdGy6O/view?usp=sharing', icon: 'FileText' },
                    { label: 'Cuidado de menores', url: 'https://drive.google.com/file/d/14trywoPlvtjx1-mEnY4Ww9u6OOFXsbE8/view?usp=sharing', icon: 'FileText' }
                ]
            },
            { 
                id: 6, 
                title: 'GPC Hemocultivos', 
                description: 'Guía de Práctica Clínica (Fuente: Drive).', 
                type: 'LINK', 
                category: 'Clínica', 
                content: null, 
                url: 'https://drive.google.com/file/d/1wBt0HAT5eeD5jueWelsgzc_riOXfrLdp/view?usp=sharing' 
            },
            { 
                id: 2, 
                title: 'Interpretación de Gasometrías', 
                description: 'Recursos prácticos para la lectura de equilibrio ácido-base.', 
                type: 'MULTI', 
                category: 'Clínica',
                actions: [
                    { label: 'Guía práctica de interpretación', url: 'https://drive.google.com/file/d/1oRx-lI82GiWqBGACEtRFWr30nZb7xf_B/view?usp=sharing', icon: 'FileText' },
                    { label: 'Interpretación en tres pasos', url: 'https://www.scielo.org.mx/scielo.php?script=sci_arttext&pid=S2448-89092018000300156', icon: 'FileText' }
                ]
            },
            { 
                id: 3, 
                title: 'Manual de EKG', 
                description: 'Patrones visuales. Diagnóstico inmediato.', 
                type: 'LINK', 
                category: 'Clínica', 
                content: null, 
                url: 'https://drive.google.com/file/d/1bk1J4ck_9R58DzZRpavkyt6KMpr1uCN6/view?usp=drive_link' 
            },
            { 
                id: 4, 
                title: 'Guía INS', 
                description: 'Estándares de Práctica de Terapia de Infusión.', 
                type: 'LINK', 
                category: 'Clínica', 
                content: null, 
                url: 'https://drive.google.com/file/d/1c7MEjvR0bNO1avRz1DF577nFpPX4DCjI/view?usp=sharing' 
            },
            { 
                id: 8, 
                title: 'Integridad', 
                description: 'Curar con certeza, no con suposiciones.', 
                type: 'MULTI', 
                category: 'Clínica',
                actions: [
                    { label: 'UPP', url: 'https://drive.google.com/file/d/18bdson2UjxxnrRzbf3TJZsbcTU01PKB3/view?usp=sharing', icon: 'FileText' },
                    { label: 'Ostomías', url: 'https://drive.google.com/file/d/1B984ctpG3Eb2aXZIgqsf0_szEKEXOsU0/view?usp=sharing', icon: 'FileText' },
                    { label: 'Heridas QX', url: 'https://drive.google.com/file/d/1pcY6dQsxpOMrwYje7Vro7lAbR_ixjUHk/view?usp=sharing', icon: 'FileText' },
                    { label: 'Quemaduras 2º grado', url: 'https://drive.google.com/file/d/1sSWz83gzEl7YTaqrux-jMrkSW38W3EPR/view?usp=sharing', icon: 'FileText' }
                ]
            },
            { 
                id: 5, 
                title: 'Formulario Bottom-Up', 
                description: 'Plantilla para propuestas de mejora.', 
                type: 'LINK', 
                category: 'Gestión', 
                content: null, 
                url: 'https://docs.google.com/document/d/1jMVCSdluM4NZ_0eHgOmKjD3Nmi7_kbdK/edit?usp=sharing&ouid=100609589951142608082&rtpof=true&sd=true' 
            },
        ];

        const IA_TOOLS = [
            { name: 'ChatGPT', url: 'https://chatgpt.com', desc: 'Razonamiento y estructuración.', color: 'border-emerald-500 text-emerald-700' },
            { name: 'Gemini', url: 'https://gemini.google.com', desc: 'Multimodalidad y ecosistema Google.', color: 'border-blue-500 text-blue-700' },
            { name: 'NotebookLM', url: 'https://notebooklm.google.com', desc: 'Análisis profundo de fuentes.', color: 'border-indigo-500 text-indigo-700' },
            { name: 'Perplexity', url: 'https://www.perplexity.ai', desc: 'Búsqueda con fuentes reales.', color: 'border-teal-500 text-teal-700' },
            { name: 'Consensus', url: 'https://consensus.app', desc: 'Evidencia científica real.', color: 'border-purple-500 text-purple-700' },
            { name: 'Gamma App', url: 'https://gamma.app', desc: 'Presentaciones automáticas.', color: 'border-pink-500 text-pink-700' },
        ];

        const PROMPTS = [
            { title: 'Análisis PICO (Lectura Crítica)', text: 'Actúa como un experto en metodología de investigación. Analiza el siguiente abstract y extrae la pregunta clínica en formato PICO (Paciente, Intervención, Comparación, Outcome). Presenta los resultados en una tabla clara.' },
            { title: 'Resumen de Altas (Estructura)', text: 'Tengo estas notas desordenadas sobre la evolución de un paciente. Redacta un informe de continuidad de cuidados profesional, con terminología NANDA/NIC/NOC, asegurando que sea comprensible para el siguiente turno.' },
            { title: 'Traductor Técnico Experto', text: 'Traduce este texto médico del inglés al español manteniendo el rigor técnico pero adaptando las siglas al uso común en el sistema sanitario español.' },
        ];

        const BONUS_TRACKS = [
            { id: 1, type: 'formal', title: 'Traductor PICO/PECO', tool: 'Gemini / ChatGPT', desc: 'Busca un artículo clínico reciente y pide a la IA que extraiga la pregunta en formato PICO.' },
            { id: 2, type: 'humor', title: 'El Convenio vs. Dracarys', tool: 'NotebookLM', desc: 'Pregunta al PDF del Convenio cuántos días de licencia tocan por "Cuidado de dragones".' },
            { id: 3, type: 'humor', title: 'Gasometría Reggaetonera', tool: 'ChatGPT (@monday)', desc: 'Pide a @monday que explique la acidosis metabólica usando slang de reggaetón.' },
            { id: 4, type: 'formal', title: 'Flashcards de EKG', tool: 'NotebookLM', desc: 'Solicita a NotebookLM que genere tarjetas de estudio para repasar arritmias.' },
            { id: 5, type: 'humor', title: 'Caso Clínico "House"', tool: 'Gemini / ChatGPT', desc: 'Busca una noticia clínica curiosa y pide un diagnóstico diferencial estilo Dr. House.' },
            { id: 6, type: 'formal', title: 'Simplificador de CI', tool: 'Gemini', desc: 'Usa el texto del CI de Amígdalas y pide que reescriba los riesgos para un niño de 9 años.' },
            { id: 7, type: 'humor', title: 'Influencer de Heridas', tool: 'ChatGPT', desc: 'Redacta un post de Instagram sobre una cura con tono influencer y hashtags absurdos.' },
            { id: 8, type: 'formal', title: 'Investigador Hemocultivos', tool: 'NotebookLM', desc: 'Busca una guía de hemocultivos, cárgala y extrae el protocolo paso a paso.' },
            { id: 9, type: 'humor', title: 'Tinder de los Apósitos', tool: 'ChatGPT (@monday)', desc: 'Crea un perfil de Tinder para un apósito (ej. Alginato) buscando "herida exudativa".' },
            { id: 10, type: 'humor', title: 'Emoji-Protocolo', tool: 'NotebookLM', desc: 'Pide resumir el protocolo de Gasometrías usando SOLO emojis.' },
            { id: 11, type: 'formal', title: 'Proyecto "Papel Cero"', tool: 'Gemini / ChatGPT', desc: 'Pide un cronograma a 6 meses para eliminar el papel en tu unidad.' },
            { 
                id: 12, 
                type: 'formal', 
                title: 'El Entrevistador Inverso', 
                tool: 'ChatGPT / Gemini', 
                desc: 'La IA te entrevista para configurar tus instrucciones personalizadas. (Haz clic para COPIAR el prompt).',
                prompt: `Actúa como mi estratega personal de IA. Tu objetivo es crear mis Instrucciones Personalizadas (Custom Instructions) con el mínimo número de preguntas posible.
Reglas obligatorias:
Harás una sola pregunta por turno.
Cada pregunta debe formularse de una en una (no encadenes dos preguntas distintas en el mismo turno).
No puedes avanzar ni hacer la siguiente pregunta hasta que yo responda.
Prioriza preguntas cerradas o semiestructuradas (opciones, escalas, plantillas) para responder rápido.
No des recomendaciones hasta terminar la entrevista; solo recopila datos.
En cuanto tengas lo mínimo imprescindible, generarás el texto exacto listo para pegar en la configuración, en dos bloques:
“Qué debería saber ChatGPT sobre mí…”
“Cómo debería responder ChatGPT…”
Redacción en español (España), cumpliendo RAE.
El resultado debe incluir: reglas priorizadas, formatos preferidos, límites de longitud, cuándo preguntar vs. asumir, y un bloque final de “No hacer / Prohibiciones”.
Si para contestar hace falta información actual (normativa, guías, precios, versiones), indícalo explícitamente y sugiere verificación, sin inventar.
Cierre obligatorio:
Tras entregar los 2 bloques, debes decir: “Revísalo y dime qué corregir, añadir o eliminar para afinarlo.”`
            },
            { 
                id: 13, 
                type: 'humor', 
                title: '12+1. Mi IA es mi Jefe', 
                tool: 'ChatGPT (@monday)', 
                desc: 'Dile a @monday que has terminado. Disfruta la felicitación exagerada.',
                prompt: 'Escribe una felicitación épica, muy humorística y sin vergüenza, dirigida a mí (soy una asistente del Taller IA Nivel 2 para Enfermería) porque he llegado al final de todos los bonus track. Incluye guiños internos al taller (workflows, prompts, “IA copiloto, yo al volante”, seguridad/criterio clínico, caos controlado) y menciona al docente: Iñaki, enfermero. Tono gamberro pero profesional, frases cortas, algún emoji, y remata con un cierre memorable tipo “Logro desbloqueado”.' 
            },
        ];

        // --- COMPONENTES UI ---

        const Card = ({ children, className = "", onClick }) => (
            <div 
                onClick={onClick}
                className={`bg-white rounded-xl border border-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 p-6 ${className} ${onClick ? 'cursor-pointer active:scale-95' : ''}`}
            >
                {children}
            </div>
        );

        const Button = ({ children, onClick, variant = "primary", className = "" }) => {
            const variants = {
                primary: "bg-medical-600 text-white hover:bg-medical-800 shadow-sm",
                secondary: "bg-slate-100 text-slate-700 hover:bg-slate-200",
                outline: "border border-slate-200 text-slate-600 hover:bg-slate-50",
                white: "bg-white text-medical-600 border border-slate-100 shadow-sm hover:bg-slate-50"
            };
            return (
                <button onClick={onClick} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2 ${variants[variant]} ${className}`}>
                    {children}
                </button>
            );
        };

        const BonusCard = ({ track, index }) => {
            const isHumor = track.type === 'humor';
            const hasPrompt = !!track.prompt;
            
            const handleCopy = () => {
                if (track.prompt) {
                    copyToClipboard(track.prompt);
                }
            };

            return (
                <div 
                    onClick={hasPrompt ? handleCopy : undefined}
                    className={`relative bg-white rounded-xl border-l-4 p-5 shadow-sm hover:shadow-md transition-all flex flex-col h-full ${isHumor ? 'border-orange-400' : 'border-medical-600'} ${hasPrompt ? 'cursor-pointer hover:bg-slate-50 group' : ''}`}
                >
                    <div className="flex justify-between items-start mb-3">
                        <div className="flex items-center gap-2">
                            <span className={`flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${isHumor ? 'bg-orange-100 text-orange-700' : 'bg-blue-100 text-blue-700'}`}>
                                {track.id === 13 ? "★" : index + 1}
                            </span>
                        </div>
                        <div className={`text-slate-300 ${isHumor ? 'text-orange-300' : ''}`}>
                            <Icon name={isHumor ? "Laugh" : "Brain"} size={18} />
                        </div>
                    </div>
                    
                    <h3 className="font-bold text-slate-800 mb-1 leading-snug">{track.title}</h3>
                    
                    <div className="flex items-center gap-2 mb-3">
                        <span className="text-[10px] uppercase font-bold text-slate-400 tracking-wider">Herramienta:</span>
                        <span className="text-xs font-medium text-slate-600 bg-slate-100 px-2 py-0.5 rounded">{track.tool}</span>
                    </div>

                    <p className="text-sm text-slate-600 leading-relaxed border-t border-slate-50 pt-3 mt-auto">
                        {track.desc}
                    </p>

                    {hasPrompt && (
                        <div className="mt-3 text-xs font-bold text-medical-600 opacity-0 group-hover:opacity-100 transition-opacity flex justify-end items-center gap-1">
                            <Icon name="Copy" size={12} /> Copiar Prompt
                        </div>
                    )}
                </div>
            );
        };

        const DocModal = ({ doc, onClose }) => {
            if (!doc) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-in">
                    <div className="bg-white rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl overflow-hidden">
                        <div className="p-4 border-b bg-slate-50 flex justify-between items-center">
                            <h3 className="font-semibold text-slate-800 flex items-center gap-2">
                                <Icon name="FileText" size={18} className="text-medical-600"/> {doc.title}
                            </h3>
                            <button onClick={onClose} className="text-slate-400 hover:text-slate-600"><Icon name="X" size={20}/></button>
                        </div>
                        <div className="p-6 overflow-y-auto custom-scroll bg-white">
                            <pre className="whitespace-pre-wrap font-sans text-sm text-slate-600 leading-relaxed">{doc.content}</pre>
                        </div>
                        <div className="p-4 border-t bg-slate-50 flex justify-end gap-3">
                            <Button variant="secondary" onClick={onClose}>Cerrar</Button>
                            <Button onClick={() => { copyToClipboard(doc.content); alert("Copiado"); }}>
                                <Icon name="Copy" size={16} /> Copiar Texto
                            </Button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP ---

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [selectedDoc, setSelectedDoc] = useState(null);

            const handleOpenDoc = (doc) => {
                if (doc.type === 'LINK') {
                    doc.url ? window.open(doc.url, '_blank') : alert("Enlace no configurado");
                } else {
                    setSelectedDoc(doc);
                }
            };

            const renderContent = () => {
                switch (activeTab) {
                    case 'home':
                        return (
                            <div className="space-y-8 animate-in max-w-4xl mx-auto">
                                <header className="text-center py-16 px-4">
                                    <h1 className="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight mb-4">
                                        Taller <span className="text-medical-600">IA</span> nivel 2 para enfermer<span className="text-medical-600">IA</span>
                                    </h1>
                                    <p className="text-lg text-slate-500 max-w-2xl mx-auto mb-8 font-light leading-relaxed">
                                        Más allá del prompt: flujos de trabajo inteligentes.
                                    </p>
                                </header>

                                <div className="grid md:grid-cols-2 gap-6">
                                    <Card className="border-l-4 border-l-medical-600">
                                        <h2 className="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                            <Icon name="Target" className="text-medical-600" /> Objetivo del taller
                                        </h2>
                                        <ul className="space-y-3 text-slate-600 text-sm">
                                            {[
                                                "Conocer herramientas de IA útiles (y sus límites).",
                                                "Método seguro: pedir → verificar → producir.",
                                                "Workflows para ahorrar tiempo sin bajar calidad."
                                            ].map((item, i) => (
                                                <li key={i} className="flex gap-3">
                                                    <span className="text-medical-600 font-bold">•</span> {item}
                                                </li>
                                            ))}
                                        </ul>
                                    </Card>
                                    <Card className="border-l-4 border-l-orange-400 bg-orange-50/30">
                                        <h2 className="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                            <Icon name="AlertCircle" className="text-orange-500" /> Uso responsable
                                        </h2>
                                        <ul className="space-y-3 text-slate-600 text-sm">
                                            {[
                                                "IA como copiloto.",
                                                "Tú al volante.",
                                                "Verifica antes de actuar."
                                            ].map((item, i) => (
                                                <li key={i} className="flex gap-3">
                                                    <span className="text-orange-500 font-bold">•</span> {item}
                                                </li>
                                            ))}
                                        </ul>
                                    </Card>
                                </div>
                            </div>
                        );

                    case 'repo':
                        return (
                            <div className="animate-in max-w-5xl mx-auto">
                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-slate-900">Documentación</h2>
                                    <p className="text-slate-500">Material base para los ejercicios prácticos.</p>
                                </div>
                                <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
                                    {REPOSITORY_DOCS.map(doc => (
                                        <Card key={doc.id} className="flex flex-col h-full hover:-translate-y-1">
                                            <div className="flex justify-between items-start mb-4">
                                                <div className={`p-2 rounded-lg ${doc.type === 'DOC' ? 'bg-emerald-50 text-emerald-600' : 'bg-blue-50 text-blue-600'}`}>
                                                    <Icon name="FileText" size={20} />
                                                </div>
                                                <span className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">{doc.category}</span>
                                            </div>
                                            <h3 className="font-bold text-slate-800 mb-2">{doc.title}</h3>
                                            <p className="text-sm text-slate-500 mb-6 flex-grow">{doc.description}</p>
                                            
                                            {/* Lógica de renderizado de botones */}
                                            {doc.type === 'MULTI' ? (
                                                <div className="space-y-2 w-full">
                                                    {doc.actions.map((action, idx) => (
                                                        <a key={idx} href={action.url} target="_blank" rel="noopener noreferrer" className="block w-full">
                                                            <Button 
                                                                variant="white" 
                                                                className="w-full justify-start text-xs h-9 hover:-translate-y-0.5 hover:shadow-md hover:bg-medical-50 hover:text-medical-600 hover:border-medical-300 transition-all duration-200"
                                                            >
                                                                <Icon name={action.icon} size={14} /> {action.label}
                                                            </Button>
                                                        </a>
                                                    ))}
                                                </div>
                                            ) : (
                                                <Button 
                                                    variant={doc.type === 'DOC' ? 'primary' : 'white'} 
                                                    onClick={() => handleOpenDoc(doc)}
                                                    className="w-full"
                                                >
                                                    {doc.type === 'DOC' ? <><Icon name="Eye" size={16}/> Ver Texto</> : <><Icon name="ExternalLink" size={16}/> Abrir PDF</>}
                                                </Button>
                                            )}
                                        </Card>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'tools':
                        return (
                            <div className="animate-in max-w-5xl mx-auto">
                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-slate-900">Toolkit IA</h2>
                                    <p className="text-slate-500">Acceso directo a los modelos seleccionados.</p>
                                </div>
                                <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-5 mb-12">
                                    {IA_TOOLS.map(tool => (
                                        <a key={tool.name} href={tool.url} target="_blank" rel="noopener" className="block h-full group">
                                            <div className={`h-full bg-white rounded-xl border p-5 transition-all hover:shadow-md hover:border-medical-600 group-hover:-translate-y-1 ${tool.color.split(' ')[0]}`}>
                                                <div className="flex justify-between items-center mb-3">
                                                    <h3 className="font-bold text-slate-800">{tool.name}</h3>
                                                    <Icon name="ExternalLink" size={16} className="text-slate-300 group-hover:text-medical-600" />
                                                </div>
                                                <p className="text-sm text-slate-500">{tool.desc}</p>
                                            </div>
                                        </a>
                                    ))}
                                </div>

                                <div className="max-w-3xl mx-auto">
                                    <h3 className="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                        <Icon name="MessageSquare" className="text-medical-600"/> Prompts Base
                                    </h3>
                                    {PROMPTS.map((p, i) => (
                                        <div key={i} className="mb-3 border border-slate-200 rounded-lg bg-white overflow-hidden group">
                                            <details className="group">
                                                <summary className="flex items-center justify-between p-4 cursor-pointer list-none hover:bg-slate-50">
                                                    <span className="font-medium text-slate-700">{p.title}</span>
                                                    <Icon name="ChevronDown" size={16} className="text-slate-400 group-open:rotate-180 transition-transform"/>
                                                </summary>
                                                <div className="px-4 pb-4 pt-0">
                                                    <div className="bg-slate-50 p-3 rounded text-sm text-slate-600 font-mono mb-2">{p.text}</div>
                                                    <button onClick={() => { copyToClipboard(p.text); alert("Copiado"); }} className="text-xs font-semibold text-medical-600 hover:text-medical-800 flex items-center gap-1">
                                                        <Icon name="Copy" size={12}/> Copiar
                                                    </button>
                                                </div>
                                            </details>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'bonus':
                        return (
                            <div className="animate-in max-w-6xl mx-auto">
                                <div className="mb-8 flex items-center justify-between">
                                    <div>
                                        <h2 className="text-2xl font-bold text-slate-900">Bonus Tracks</h2>
                                        <p className="text-slate-500">Ejercicios extra para fijar conceptos ; )</p>
                                    </div>
                                    <div className="hidden sm:block text-yellow-500 bg-yellow-50 p-2 rounded-full">
                                        <Icon name="Trophy" size={24} />
                                    </div>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                                    {BONUS_TRACKS.map((track, index) => <BonusCard key={track.id} track={track} index={index} />)}
                                </div>
                            </div>
                        );
                    default: return null;
                }
            };

            return (
                <div className="min-h-screen flex flex-col bg-slate-50/50">
                    {/* Navegación Desktop */}
                    <nav className="sticky top-0 z-40 glass border-b border-slate-200/60">
                        <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
                            {/* Botón Home Minimalista (Izquierda) */}
                            <button 
                                onClick={() => setActiveTab('home')}
                                className={`p-2 rounded-lg transition-all duration-200 ${
                                    activeTab === 'home' 
                                    ? 'text-medical-600 bg-blue-50 ring-1 ring-blue-100' 
                                    : 'text-slate-400 hover:text-slate-600 hover:bg-slate-50'
                                }`}
                                title="Volver al Inicio"
                            >
                                <Icon name="Home" size={22} />
                            </button>

                            {/* Navegación Secciones (Derecha) */}
                            <div className="hidden md:flex gap-2">
                                 {[
                                    { id: 'repo', label: 'Docs', icon: 'BookOpen' }, 
                                    { id: 'tools', label: 'Tools', icon: 'Wrench' }, 
                                    { id: 'bonus', label: 'Bonus', icon: 'Trophy' }
                                ].map(t => (
                                    <button
                                        key={t.id}
                                        onClick={() => setActiveTab(t.id)}
                                        className={`
                                            flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all duration-300 border
                                            ${activeTab === t.id 
                                                ? 'bg-medical-50 text-medical-800 border-medical-200 shadow-sm' 
                                                : 'bg-transparent text-slate-500 border-transparent hover:bg-white hover:text-medical-600 hover:border-slate-100 hover:shadow-md hover:-translate-y-1'
                                            }
                                        `}
                                    >
                                        <Icon name={t.icon} size={18} className={activeTab === t.id ? "text-medical-600" : "currentColor"} />
                                        {t.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    <main className="flex-grow w-full max-w-6xl mx-auto px-4 py-8">
                        {renderContent()}
                    </main>

                    {/* Footer Profesional */}
                    <footer className="bg-white border-t border-slate-200 py-12 mt-12">
                        <div className="max-w-5xl mx-auto px-4 flex justify-center flex-col items-center">
                            <div className="text-center">
                                <h4 className="font-bold text-slate-800 mb-3 flex items-center justify-center gap-2">
                                    <Icon name="Glasses" size={16} className="text-medical-600"/> Docencia
                                </h4>
                                <p className="text-sm text-slate-500">Diseño: Iñaki Casas | Potenciado por IA</p>
                            </div>
                            
                            {/* Contacto */}
                             <div className="flex gap-4 mt-6">
                                <button 
                                    onClick={() => { copyToClipboard('icasasosakidetza@gmail.com'); alert('Email copiado al portapapeles: icasasosakidetza@gmail.com'); }} 
                                    className="p-2 rounded-full bg-slate-50 text-slate-400 hover:text-medical-600 hover:bg-medical-50 transition-all border border-slate-100" 
                                    title="Copiar Email"
                                >
                                    <Icon name="Mail" size={18} />
                                </button>
                                <a href="https://www.linkedin.com/in/iñaki-casas-ramos-b2203b2b1" target="_blank" rel="noopener noreferrer" className="p-2 rounded-full bg-slate-50 text-slate-400 hover:text-medical-600 hover:bg-medical-50 transition-all border border-slate-100" title="LinkedIn">
                                    <Icon name="Linkedin" size={18} />
                                </a>
                            </div>
                        </div>
                        <div className="max-w-5xl mx-auto px-4 border-t border-slate-100 mt-8 pt-8 text-center text-xs text-slate-400">
                            © 2026 Taller de Inteligencia Artificial para Sanitarios.
                        </div>
                    </footer>

                    {/* Nav Móvil */}
                    <div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t p-2 flex justify-around pb-safe z-50">
                        {['home', 'repo', 'tools', 'bonus'].map(id => (
                            <button key={id} onClick={() => setActiveTab(id)} className={`p-2 rounded-lg flex flex-col items-center ${activeTab === id ? 'text-medical-600 bg-blue-50' : 'text-slate-400'}`}>
                                <Icon name={id === 'home' ? 'Home' : id === 'repo' ? 'BookOpen' : id === 'tools' ? 'Wrench' : 'Trophy'} size={20} />
                                <span className="text-[10px] font-medium mt-1 capitalize">{id}</span>
                            </button>
                        ))}
                    </div>

                    {selectedDoc && <DocModal doc={selectedDoc} onClose={() => setSelectedDoc(null)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>